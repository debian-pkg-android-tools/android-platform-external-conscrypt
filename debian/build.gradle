apply plugin: 'java'
apply plugin: 'maven'

version = '0'
group = 'org.conscrypt'
compileJava.options.encoding = 'UTF-8'
compileJava.options.compilerArgs += ['-Xmaxwarns', '9999999']

repositories {
  maven { url '/usr/share/maven-repo' }
}

dependencies {
  compile 'com.android:luni:debian'
}

sourceSets.main.java {
  srcDir '../src/main/java'
  srcDir '../src/platform/java'
  srcDir '../src/stub/java'
}

javadoc.options {
  links 'file:///usr/share/doc/default-jdk-doc/api'
}

jar.manifest {
  attributes 'Class-Path': configurations.compile.collect {
    it.getPath()
  }.join(' ')
}

task poms {
  outputs.files "${buildDir}/*.pom"
  pom {
    project {}
  }.writeTo("${buildDir}/${project.name}.pom")
  pom {
    project {
      artifactId "${project.name}-jarjared"
      groupId 'com.android'
    }
  }.writeTo("${buildDir}/${project.name}-jarjared.pom")
}
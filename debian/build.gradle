apply plugin: 'java'
apply plugin: 'maven'

version = '0'
group = 'org.conscrypt'

repositories {
  maven { url '/usr/share/maven-repo' }
}

dependencies {
  compile 'com.android:dex:debian'
  compile 'com.ibm.icu:icu4j:debian'
  compile 'kxml2:kxml2:debian'
  compile 'xpp3:xpp3:debian'
}

sourceSets.main.java {
  srcDir '../src/main/java'
  srcDir '../src/platform/java'
  srcDir 'file:///usr/src/android-platform-libcore-6.0.1/dalvik/main/java'
  srcDir 'file:///usr/src/android-platform-libcore-6.0.1/libart/main/java'
  srcDir 'file:///usr/src/android-platform-libcore-6.0.1/luni/main/java'
  srcDir 'file:///usr/src/android-platform-libcore-6.0.1/xml/main/java'
}

javadoc.options {
  links 'file:///usr/share/doc/default-jdk-doc/api'
}

jar.manifest {
  attributes 'Class-Path': configurations.compile.collect {
    it.getPath()
  }.join(' ')
}

task poms {
  outputs.files "${buildDir}/*.pom"
  pom {
    project {}
  }.writeTo("${buildDir}/${project.name}.pom")
  pom {
    project {
      artifactId "${project.name}-jarjared"
      groupId 'com.android'
    }
  }.writeTo("${buildDir}/${project.name}-jarjared.pom")
}

clean.doLast {
  delete "${buildDir}/*.pom"
}